[REPORT] 20072017 11:20:35,399 INFO  [main] [TestContextManager] @TestExecutionListeners is not present for class [class org.opensrp.repository.it.FormLifeCycleTest]: using defaults.
[REPORT] 20072017 11:20:36,332 INFO  [main] [FormSubmissionListener] Creating model entities
[REPORT] 20072017 11:20:37,453 INFO  [main] [FormSubmissionListener] Handling xls configured schedules
creating schedule for : {a3f2abf4-2699-4761-819a-cea739224164=2015-05-07}
java.lang.NullPointerException
	at java.util.TreeMap.compare(TreeMap.java:1290)
	at java.util.TreeMap.put(TreeMap.java:538)
	at org.ektorp.ViewQuery.queryParam(ViewQuery.java:543)
	at org.opensrp.service.formSubmission.ziggy.ZiggyDataHandler.getDBViewQueryResult(ZiggyDataHandler.java:77)
	at org.opensrp.service.formSubmission.ziggy.ZiggyDataHandler.saveEntity(ZiggyDataHandler.java:41)
	at jdk.nashorn.internal.scripts.Script$Recompilation$275$29879AA$\^eval\_.L:637$saveEntity(<eval>:653)
	at jdk.nashorn.internal.scripts.Script$Recompilation$266$35296AAA$\^eval\_.L:755$p(<eval>:803)
	at jdk.nashorn.internal.scripts.Script$Recompilation$239$39006AA$\^eval\_.L:755$mapToEntityAndSave(<eval>:912)
	at jdk.nashorn.internal.scripts.Script$Recompilation$220$45857AA$\^eval\_.L:1047$h(<eval>:1055)
	at jdk.nashorn.internal.scripts.Script$Recompilation$219$46635AA$\^eval\_.L:1047$createOrUpdateEntity(<eval>:1073)
	at jdk.nashorn.internal.runtime.ScriptFunctionData.invoke(ScriptFunctionData.java:644)
	at jdk.nashorn.internal.runtime.ScriptFunction.invoke(ScriptFunction.java:228)
	at jdk.nashorn.internal.runtime.ScriptRuntime.apply(ScriptRuntime.java:393)
	at jdk.nashorn.api.scripting.ScriptObjectMirror.callMember(ScriptObjectMirror.java:199)
	at jdk.nashorn.api.scripting.NashornScriptEngine.invokeImpl(NashornScriptEngine.java:383)
	at jdk.nashorn.api.scripting.NashornScriptEngine.invokeMethod(NashornScriptEngine.java:199)
	at org.opensrp.service.formSubmission.ziggy.ZiggyService.saveForm(ZiggyService.java:49)
	at org.opensrp.service.formSubmission.FormSubmissionProcessor.passToZiggy(FormSubmissionProcessor.java:183)
	at org.opensrp.service.formSubmission.FormSubmissionProcessor.processFormSubmission(FormSubmissionProcessor.java:63)
	at org.opensrp.repository.it.FormLifeCycleTest.shouldCreateClientAndEventAndSchedulesWithZiggy(FormLifeCycleTest.java:227)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:497)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:74)
	at org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:83)
	at org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:72)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:231)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:50)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:238)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:63)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:236)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:53)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:229)
	at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
	at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:71)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:309)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:174)
	at org.apache.maven.surefire.junit4.JUnit4TestSet.execute(JUnit4TestSet.java:53)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:123)
	at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:104)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:497)
	at org.apache.maven.surefire.util.ReflectionUtils.invokeMethodWithArray(ReflectionUtils.java:164)
	at org.apache.maven.surefire.booter.ProviderFactory$ProviderProxy.invoke(ProviderFactory.java:110)
	at org.apache.maven.surefire.booter.SurefireStarter.invokeProvider(SurefireStarter.java:172)
	at org.apache.maven.surefire.booter.SurefireStarter.runSuitesInProcessWhenForked(SurefireStarter.java:104)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:70)
[REPORT] 20072017 11:20:37,935 ERROR [main] [ZiggyService] Form save failed, with params: {"anmId":"demotest","serverVersion":"1430998001293","instanceId":"88c0e824-10b4-44c2-9429-754b8d823776","formName":"new_household_registration","entityId":"a3f2abf4-2699-4761-819a-cea739224164","clientVersion":"1430997074596"}, with instance {"form_data_definition_version":"1","form":{"bind_type":"household","default_bind_path":"/model/instance/FWNewHH","fields":[{"name":"id","value":"a3f2abf4-2699-4761-819a-cea739224164","source":"household.id"},{"name":"existing_location","value":"KUPTALA","source":"household.existing_location"},{"name":"today","value":"2015-05-07","source":"household.today"},{"name":"start","value":"2015-05-07T17:07:21.000+06:00","source":"household.start"},{"name":"end","value":"2015-05-07T17:07:21.000+06:00","source":"household.end"},{"name":"FWNHREGDATE","value":"2015-05-07","source":"household.FWNHREGDATE"},{"name":"FWGOBHHID","value":"1234","source":"household.FWGOBHHID"},{"name":"FWJIVHHID","value":"1234","source":"household.FWJIVHHID"},{"name":"FWNHNEARTO","value":"nothing","source":"household.FWNHNEARTO"},{"name":"FWNHHHGPS","value":"34 34 0 0","source":"household.FWNHHHGPS"},{"name":"FWHOHFNAME","value":"test","source":"household.FWHOHFNAME"},{"name":"FWHOHLNAME","value":".","source":"household.FWHOHLNAME"},{"name":"FWHOHBIRTHDATE","value":"1900-01-01","source":"household.FWHOHBIRTHDATE"},{"name":"FWHOHGENDER","value":"male","source":"household.FWHOHGENDER"},{"name":"FWNHHMBRNUM","value":"2","source":"household.FWNHHMBRNUM"},{"name":"FWNHHMWRA","value":"1","source":"household.FWNHHMWRA"},{"name":"join_names","value":"shumi sumaita","source":"household.join_names"},{"name":"MWRA","value":"2","source":"household.MWRA"}],"sub_forms":[{"name":"elco_registration","bind_type":"elco","default_bind_path":"/model/instance/FWNewHH/woman","fields":[{"name":"id","source":"elco.id"},{"name":"GOBHHID","source":"elco.GOBHHID"},{"name":"JiVitAHHID","source":"elco.JiVitAHHID"},{"name":"FWWOMFNAME","source":"elco.FWWOMFNAME"},{"name":"FWWOMLNAME","source":"elco.FWWOMLNAME"},{"name":"FWWOMNID","source":"elco.FWWOMNID"},{"name":"FWWOMBID","source":"elco.FWWOMBID"},{"name":"FWHUSNAME","source":"elco.FWHUSNAME"},{"name":"FWBIRTHDATE","source":"elco.FWBIRTHDATE"},{"name":"FWGENDER","source":"elco.FWGENDER"},{"name":"FWWOMAGE","source":"elco.FWWOMAGE"},{"name":"display_age","source":"elco.display_age"},{"name":"FWNHWOMSTRMEN","source":"elco.FWNHWOMSTRMEN"},{"name":"FWNHWOMHUSALV","source":"elco.FWNHWOMHUSALV"},{"name":"FWNHWOMHUSLIV","source":"elco.FWNHWOMHUSLIV"},{"name":"FWNHWOMHUSSTR","source":"elco.FWNHWOMHUSSTR"},{"name":"FWELIGIBLE","source":"elco.FWELIGIBLE"}],"instances":[{"GOBHHID":"1234323","JiVitAHHID":"123465656","FWWOMFNAME":"shumi","FWWOMLNAME":".","FWWOMNID":"","FWWOMBID":"54676545676787876","FWHUSNAME":"selim","FWBIRTHDATE":"1998-02-04","FWGENDER":"female","FWWOMAGE":"17","display_age":"","FWNHWOMSTRMEN":"1","FWNHWOMHUSALV":"","FWNHWOMHUSLIV":"","FWNHWOMHUSSTR":"","FWELIGIBLE":"0","id":"babcd9d2-b3e9-4f6d-8a06-2df8f5fbf01f"},{"GOBHHID":"1234121","JiVitAHHID":"12348787","FWWOMFNAME":"sumaita","FWWOMLNAME":".","FWWOMNID":"","FWWOMBID":"56543456567654567","FWHUSNAME":"razzak","FWBIRTHDATE":"1989-08-18","FWGENDER":"female","FWWOMAGE":"26","display_age":"","FWNHWOMSTRMEN":"0","FWNHWOMHUSALV":"1","FWNHWOMHUSLIV":"1","FWNHWOMHUSSTR":"1","FWELIGIBLE":"0","id":"74eebb60-a1b9-4691-81a4-5c04ecce7ae9"}]}],"mapOfFieldsByName":{"FWHOHLNAME":".","FWHOHGENDER":"male","FWNHREGDATE":"2015-05-07","join_names":"shumi sumaita","FWNHHHGPS":"34 34 0 0","start":"2015-05-07T17:07:21.000+06:00","FWNHHMWRA":"1","FWGOBHHID":"1234","existing_location":"KUPTALA","FWHOHFNAME":"test","FWNHNEARTO":"nothing","today":"2015-05-07","FWJIVHHID":"1234","FWHOHBIRTHDATE":"1900-01-01","end":"2015-05-07T17:07:21.000+06:00","id":"a3f2abf4-2699-4761-819a-cea739224164","FWNHHMBRNUM":"2","MWRA":"2"}}}. Exception: java.lang.NullPointerException

